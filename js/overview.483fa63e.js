(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["overview"],{"075b":function(t,e,i){"use strict";var r=i("e30d"),o=i.n(r);o.a},2226:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-content",{staticStyle:{"max-height":"100vh"}},[i("Notifications"),i("v-app-bar",{attrs:{color:"blue-grey",dark:"",dense:""}},[i("v-toolbar-title",[t._v("HentAdmin")]),i("v-spacer"),i("ToolbarMenu")],1),i("v-container",{staticClass:"content"},[i("h4",{staticClass:"display-1 font-weight-bold my-3"},[t._v("Мониторинг")]),i("div",{staticClass:"py-2"},[i("v-btn",{staticClass:"mr-3",attrs:{small:"",outlined:"",color:"primary"}},[i("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v(" Добавить бота ")],1),i("v-btn",{attrs:{icon:"",color:"primary",small:"",loading:t.refreshing},on:{click:t.refresh}},[i("v-icon",[t._v("mdi-refresh")])],1)],1),i("v-row",t._l(t.$store.state.botList,(function(t){return i("BotCard",{key:t.id,attrs:{value:t}})})),1)],1)],1)},o=[],s=(i("96cf"),i("c964")),a=i("b157"),n=i("0d99"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"4",xl:"3"}},[i("v-card",{staticClass:"elevation-3 botCard"},[i("v-list-item",{attrs:{"two-line":""}},[i("v-badge",{staticClass:"progressBadge",attrs:{bottom:"","offset-x":"30","offset-y":"32",color:t.badgeType},scopedSlots:t._u([t.badgeType?{key:"badge",fn:function(){return["red"===t.badgeType?i("v-icon",{staticStyle:{"font-size":"12px"},attrs:{color:"white"}},[t._v("mdi-alert")]):i("v-progress-circular",{staticClass:"ma-0",attrs:{color:"white",indeterminate:"",size:"14",width:"2"}})]},proxy:!0}:null],null,!0)},[i("v-list-item-avatar",{staticClass:"ml-0"},[i("v-avatar",[i("v-img",{attrs:{src:t.value.info.photos&&t.value.info.photos[0]}})],1)],1)],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(t.value.info.name)}}),i("v-list-item-subtitle",[t._v(" Статус: "),i("span",{directives:[{name:"t",rawName:"v-t",value:"botStatuses."+t.value.status,expression:"`botStatuses.${value.status}`"}]}),t.value.info.unknown?i("div",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.infoUnknown",expression:"'overview.cards.infoUnknown'"}],staticClass:"font-weight-medium caption"}):t._e()]),t.value.hasErrors&&"failed"!==t.value.status?i("v-list-item-subtitle",{staticClass:"orange--text d-flex align-items"},[i("v-icon",{attrs:{left:"",small:"",color:"orange"}},[t._v("mdi-alert")]),i("b",[t._v("Есть ошибки")])],1):t._e()],1),i("v-list-item-action",[i("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-btn",t._g({attrs:{disabled:t.blockCtl,color:"primary",icon:"",dark:""}},r),[i("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[i("v-list",{attrs:{dense:""}},["enabled"===t.value.status?i("v-list-item",{on:{click:function(){return t.stateCtl("reload")}}},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"orange"}},[t._v("mdi-refresh")])],1),i("v-list-item-title",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.restart",expression:"'overview.cards.restart'"}]})],1):t._e(),"enabled"===t.value.status?i("v-list-item",{on:{click:function(){return t.stateCtl("disable")}}},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-power")])],1),i("v-list-item-title",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.disable",expression:"'overview.cards.disable'"}]})],1):t.allowStart?i("v-list-item",{on:{click:function(){return t.stateCtl("enable")}}},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"green"}},[t._v("mdi-play")])],1),i("v-list-item-title",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.enable",expression:"'overview.cards.enable'"}]})],1):t._e(),i("v-divider"),i("v-list-item",{attrs:{target:"_blank",href:"https://vk.com/club"+t.value.info.groupId}},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"primary"}},[t._v("mdi-vk")])],1),i("v-list-item-title",[t._v("Группа ВКонтакте")])],1)],1)],1)],1)],1),i("v-card-actions",{staticClass:"mt-0 pt-0",staticStyle:{"margin-top":"auto"}},[i("v-btn",{attrs:{text:"",color:"primary",to:"/dashboard/"+t.value.id}},[t._v("Управление")])],1)],1)],1)},c=[],d=(i("caad"),i("8a79"),{props:["value"],computed:{blockCtl:function(){return this.value.status.endsWith("ing")},allowStart:function(){return["failed","disabled"].includes(this.value.status)},badgeType:function(){switch(this.value.status){case"reloading":return"orange";case"disabling":return"red darken-1";case"enabling":return"green";case"failed":return"red";default:return null}}},methods:{stateCtl:function(t){var e=this.value.id;this.api.execMethod("bots.ctl",{id:e,command:t})}}}),u=d,h=(i("6d9a"),i("2877")),p=i("6544"),v=i.n(p),f=i("8212"),m=i("4ca6"),S=i("8336"),b=i("b0af"),g=i("99d9"),w=i("62ad"),O=i("ce7e"),T=i("132d"),_=i("adda"),y=i("8860"),C=i("da13"),x=i("1800"),k=i("8270"),V=i("5d23"),B=i("34c3"),L=i("e449"),I=i("490a"),A=Object(h["a"])(u,l,c,!1,null,null,null),j=A.exports;v()(A,{VAvatar:f["a"],VBadge:m["a"],VBtn:S["a"],VCard:b["a"],VCardActions:g["a"],VCol:w["a"],VDivider:O["a"],VIcon:T["a"],VImg:_["a"],VList:y["a"],VListItem:C["a"],VListItemAction:x["a"],VListItemAvatar:k["a"],VListItemContent:V["a"],VListItemIcon:B["a"],VListItemSubtitle:V["b"],VListItemTitle:V["c"],VMenu:L["a"],VProgressCircular:I["a"]});var M={components:{Notifications:a["a"],ToolbarMenu:n["a"],BotCard:j},data:function(){return{refreshing:!1}},methods:{refresh:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.refreshing=!0,e.next=3,t.api.execMethod("bots");case 3:i=e.sent,r=i.response,t.$store.commit({type:"updateBotList",botList:r}),t.refreshing=!1;case 7:case"end":return e.stop()}}),e)})))()},updateStatus:function(t){var e=t.id,i=t.status;this.$store.commit({type:"updateBot",id:e,status:i})},updateInfo:function(t){var e=t.id,i=t.info;this.$store.commit({type:"updateBot",id:e,info:i})}},created:function(){this.api.ws.on("status_new",this.updateStatus),this.api.ws.on("info_new",this.updateInfo)},beforeDestroy:function(){this.api.ws.off("status_new",this.updateStatus),this.api.ws.off("info_new",this.updateInfo)},mounted:function(){this.refresh()}},H=M,N=(i("075b"),i("40dc")),$=i("a523"),R=i("a75b"),E=i("0fd9"),U=i("2fa4"),P=i("2a7f"),z=Object(h["a"])(H,r,o,!1,null,"5b176ff0",null);e["default"]=z.exports;v()(z,{VAppBar:N["a"],VBtn:S["a"],VContainer:$["a"],VContent:R["a"],VIcon:T["a"],VRow:E["a"],VSpacer:U["a"],VToolbarTitle:P["a"]})},"2a7f":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var r=i("71d9"),o=i("80d2"),s=Object(o["h"])("v-toolbar__title"),a=Object(o["h"])("v-toolbar__items");r["a"]},"40dc":function(t,e,i){"use strict";i("a9e3"),i("b6802"),i("c7cd");var r=i("f3f3"),o=(i("8b0d"),i("71d9"));function s(t,e){var i=e.value,r=e.options||{passive:!0},o=e.arg?document.querySelector(e.arg):window;o&&(o.addEventListener("scroll",i,r),t._onScroll={callback:i,options:r,target:o})}function a(t){if(t._onScroll){var e=t._onScroll,i=e.callback,r=e.options,o=e.target;o.removeEventListener("scroll",i,r),delete t._onScroll}}var n={inserted:s,unbind:a},l=n,c=i("3a66"),d=i("d9bd"),u=i("2b0e"),h=u["default"].extend({name:"scrollable",directives:{Scroll:n},props:{scrollTarget:String,scrollThreshold:[String,Number]},data:function(){return{currentScroll:0,currentThreshold:0,isActive:!1,isScrollingUp:!1,previousScroll:0,savedScroll:0,target:null}},computed:{canScroll:function(){return"undefined"!==typeof window},computedScrollThreshold:function(){return this.scrollThreshold?Number(this.scrollThreshold):300}},watch:{isScrollingUp:function(){this.savedScroll=this.savedScroll||this.currentScroll},isActive:function(){this.savedScroll=0}},mounted:function(){this.scrollTarget&&(this.target=document.querySelector(this.scrollTarget),this.target||Object(d["c"])("Unable to locate element with identifier ".concat(this.scrollTarget),this))},methods:{onScroll:function(){var t=this;this.canScroll&&(this.previousScroll=this.currentScroll,this.currentScroll=this.target?this.target.scrollTop:window.pageYOffset,this.isScrollingUp=this.currentScroll<this.previousScroll,this.currentThreshold=Math.abs(this.currentScroll-this.computedScrollThreshold),this.$nextTick((function(){Math.abs(t.currentScroll-t.savedScroll)>t.computedScrollThreshold&&t.thresholdMet()})))},thresholdMet:function(){}}}),p=i("d10f"),v=i("f2e7"),f=i("80d2"),m=i("58df"),S=Object(m["a"])(o["a"],h,p["a"],v["a"],Object(c["a"])("top",["clippedLeft","clippedRight","computedHeight","invertedScroll","isExtended","isProminent","value"]));e["a"]=S.extend({name:"v-app-bar",directives:{Scroll:l},props:{clippedLeft:Boolean,clippedRight:Boolean,collapseOnScroll:Boolean,elevateOnScroll:Boolean,fadeImgOnScroll:Boolean,hideOnScroll:Boolean,invertedScroll:Boolean,scrollOffScreen:Boolean,shrinkOnScroll:Boolean,value:{type:Boolean,default:!0}},data:function(){return{isActive:this.value}},computed:{applicationProperty:function(){return this.bottom?"bottom":"top"},canScroll:function(){return h.options.computed.canScroll.call(this)&&(this.invertedScroll||this.elevateOnScroll||this.hideOnScroll||this.collapseOnScroll||this.isBooted||!this.value)},classes:function(){return Object(r["a"])({},o["a"].options.computed.classes.call(this),{"v-toolbar--collapse":this.collapse||this.collapseOnScroll,"v-app-bar":!0,"v-app-bar--clipped":this.clippedLeft||this.clippedRight,"v-app-bar--fade-img-on-scroll":this.fadeImgOnScroll,"v-app-bar--elevate-on-scroll":this.elevateOnScroll,"v-app-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-app-bar--hide-shadow":this.hideShadow,"v-app-bar--is-scrolled":this.currentScroll>0,"v-app-bar--shrink-on-scroll":this.shrinkOnScroll})},computedContentHeight:function(){if(!this.shrinkOnScroll)return o["a"].options.computed.computedContentHeight.call(this);var t=this.computedOriginalHeight,e=this.dense?48:56,i=t,r=i-e,s=r/this.computedScrollThreshold,a=this.currentScroll*s;return Math.max(e,i-a)},computedFontSize:function(){if(this.isProminent){var t=this.dense?96:128,e=t-this.computedContentHeight,i=.00347;return Number((1.5-e*i).toFixed(2))}},computedLeft:function(){return!this.app||this.clippedLeft?0:this.$vuetify.application.left},computedMarginTop:function(){return this.app?this.$vuetify.application.bar:0},computedOpacity:function(){if(this.fadeImgOnScroll){var t=Math.max((this.computedScrollThreshold-this.currentScroll)/this.computedScrollThreshold,0);return Number(parseFloat(t).toFixed(2))}},computedOriginalHeight:function(){var t=o["a"].options.computed.computedContentHeight.call(this);return this.isExtended&&(t+=parseInt(this.extensionHeight)),t},computedRight:function(){return!this.app||this.clippedRight?0:this.$vuetify.application.right},computedScrollThreshold:function(){return this.scrollThreshold?Number(this.scrollThreshold):this.computedOriginalHeight-(this.dense?48:56)},computedTransform:function(){if(!this.canScroll||this.elevateOnScroll&&0===this.currentScroll&&this.isActive)return 0;if(this.isActive)return 0;var t=this.scrollOffScreen?this.computedHeight:this.computedContentHeight;return this.bottom?t:-t},hideShadow:function(){return this.elevateOnScroll&&this.isExtended?this.currentScroll<this.computedScrollThreshold:this.elevateOnScroll?0===this.currentScroll||this.computedTransform<0:(!this.isExtended||this.scrollOffScreen)&&0!==this.computedTransform},isCollapsed:function(){return this.collapseOnScroll?this.currentScroll>0:o["a"].options.computed.isCollapsed.call(this)},isProminent:function(){return o["a"].options.computed.isProminent.call(this)||this.shrinkOnScroll},styles:function(){return Object(r["a"])({},o["a"].options.computed.styles.call(this),{fontSize:Object(f["g"])(this.computedFontSize,"rem"),marginTop:Object(f["g"])(this.computedMarginTop),transform:"translateY(".concat(Object(f["g"])(this.computedTransform),")"),left:Object(f["g"])(this.computedLeft),right:Object(f["g"])(this.computedRight)})}},watch:{canScroll:"onScroll",computedTransform:function(){this.canScroll&&(this.clippedLeft||this.clippedRight)&&this.callUpdate()},invertedScroll:function(t){this.isActive=!t||0!==this.currentScroll}},created:function(){this.invertedScroll&&(this.isActive=!1)},methods:{genBackground:function(){var t=o["a"].options.methods.genBackground.call(this);return t.data=this._b(t.data||{},t.tag,{style:{opacity:this.computedOpacity}}),t},updateApplication:function(){return this.invertedScroll?0:this.computedHeight+this.computedTransform},thresholdMet:function(){this.invertedScroll?this.isActive=this.currentScroll>this.computedScrollThreshold:this.currentThreshold<this.computedScrollThreshold||(this.hideOnScroll&&(this.isActive=this.isScrollingUp),this.savedScroll=this.currentScroll)}},render:function(t){var e=o["a"].options.render.call(this,t);return e.data=e.data||{},this.canScroll&&(e.data.directives=e.data.directives||[],e.data.directives.push({arg:this.scrollTarget,name:"scroll",value:this.onScroll})),e}})},"652f":function(t,e,i){},"6d9a":function(t,e,i){"use strict";var r=i("652f"),o=i.n(r);o.a},"8b0d":function(t,e,i){},e30d:function(t,e,i){}}]);
//# sourceMappingURL=overview.483fa63e.js.map