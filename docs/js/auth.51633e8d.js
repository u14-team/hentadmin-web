(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auth"],{"00b8":function(t,e,n){},"0e8f":function(t,e,n){"use strict";n("20f6");var i=n("e8f2");e["a"]=Object(i["a"])("flex")},"11df":function(t,e,n){},"13b3":function(t,e,n){},"2fef":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",{staticStyle:{height:"100%"}},[n("div",{staticClass:"text-xs-center text-sm-right text-md-right pa-3 pb-0"},[n("div",[n("LanguageSelector",{staticClass:"ml-2"}),n("DarkModeSwitch",{staticClass:"ml-2"})],1)]),n("v-layout",{attrs:{column:"","justify-center":"","align-center":"","fill-height":""}},[n("v-flex",{attrs:{xs3:""}},[n("h1",{staticClass:"display-3"},[t._v("HentAdmin")])]),n("v-flex",{attrs:{xs4:"","text-center":""}},[n("v-window",{staticStyle:{width:"100vw"},attrs:{transition:"slide-x-transition"},model:{value:t.window,callback:function(e){t.window=e},expression:"window"}},[n("ServerSelect",{model:{value:t.window,callback:function(e){t.window=e},expression:"window"}}),n("AuthForm",{model:{value:t.window,callback:function(e){t.window=e},expression:"window"}}),n("TokenCheck",{model:{value:t.window,callback:function(e){t.window=e},expression:"window"}})],1)],1)],1)],1)},r=[],s=n("848b"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":500},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{icon:"",color:t.color}},i),[n("v-icon",[t._v("mdi-web")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",{staticClass:"px-2"},[n("v-card-title",{staticClass:"px-1"},[n("v-btn",{staticClass:"mr-2",attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[n("v-icon",[t._v("mdi-close")])],1),n("span",{directives:[{name:"t",rawName:"v-t",value:"auth.languageSelector.title",expression:"'auth.languageSelector.title'"}]})],1),n("v-card-text",{staticClass:"px-3"},[n("LanguageSelect")],1)],1)],1)},a=[],l=n("a460"),c={props:["color"],data:function(){return{dialog:!1}},components:{LanguageSelect:l["a"]}},u=c,d=n("2877"),h=n("6544"),v=n.n(h),f=n("8336"),p=n("b0af"),m=n("99d9"),g=(n("caad"),n("45fc"),n("a9e3"),n("2532"),n("498a"),n("5530")),w=n("ade3"),y=(n("368e"),n("480e")),b=n("4ad4"),x=n("b848"),_=n("75eb"),$=n("e707"),C=n("e4d3"),k=n("21be"),S=n("f2e7"),O=n("a293"),A=n("58df"),I=n("d9bd"),T=n("80d2"),j=Object(A["a"])(b["a"],x["a"],_["a"],$["a"],C["a"],k["a"],S["a"]),E=j.extend({name:"v-dialog",directives:{ClickOutside:O["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200}},computed:{classes:function(){var t;return t={},Object(w["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(w["a"])(t,"v-dialog--active",this.isActive),Object(w["a"])(t,"v-dialog--persistent",this.persistent),Object(w["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(w["a"])(t,"v-dialog--scrollable",this.scrollable),Object(w["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(I["d"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):$["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$refs.content.focus(),t.bind()}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===T["q"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var n=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n.length&&n[0].focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(y["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(g["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:this.onClickOutside,args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(g["a"])({},t.style,{maxWidth:"none"===this.maxWidth?void 0:Object(T["f"])(this.maxWidth),width:"auto"===this.width?void 0:Object(T["f"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}}),B=n("132d"),V=Object(d["a"])(u,o,a,!1,null,null,null),L=V.exports;v()(V,{VBtn:f["a"],VCard:p["a"],VCardText:m["b"],VCardTitle:m["c"],VDialog:E,VIcon:B["a"]});var q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-window-item",{key:0,staticClass:"container"},[n("v-layout",{staticClass:"content",staticStyle:{width:"80%"},attrs:{column:t.$vuetify.breakpoint.smAndDown,reverse:"","fill-height":"","align-center":""}},[n("v-flex",{staticClass:"container"},[n("div",{staticClass:"content"},[n("h6",{directives:[{name:"t",rawName:"v-t",value:"auth.serverSelect.title",expression:"'auth.serverSelect.title'"}],staticClass:"title"}),n("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.invalid;return[n("form",{staticClass:"py-3"},[n("ValidationProvider",{attrs:{name:"Server",rules:"url|required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("v-text-field",{staticClass:"mb-3",attrs:{"error-messages":i,required:"",placeholder:"http://127.0.0.1:10001","hide-details":""},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}})]}}],null,!0)}),n("div",{staticClass:"pt-3"},[n("v-btn",{directives:[{name:"t",rawName:"v-t",value:"auth.serverSelect.continue",expression:"'auth.serverSelect.continue'"}],attrs:{color:"primary",disabled:i,loading:t.checking},on:{click:t.checkServer}})],1)],1)]}}])})],1)]),t.$store.state.persist.serverHistory.length?[n("v-flex",{attrs:{xs1:""}}),n("v-flex",{staticClass:"container",attrs:{"justify-center":""}},[n("ServerHistory",{staticClass:"content",on:{selected:t.selected}})],1)]:t._e()],2)],1)},H=[],F=(n("96cf"),n("1da1")),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"text-left py-0",attrs:{"two-line":"",dense:""}},[t.$store.state.persist.serverHistory.length?[n("v-subheader",[t._v(" История серверов "),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"primary",small:""},on:{click:t.clearHistory}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)],1),n("v-divider")]:t._e(),t._l(t.$store.state.persist.serverHistory,(function(e,i){return[n("v-list-item",{key:i,on:{click:function(){return t.selectServer(e,i)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.server)}}),t.auths[i].updating?n("v-list-item-subtitle",{staticClass:"d-flex"},[n("v-progress-circular",{staticClass:"mr-2",attrs:{size:"14",width:"2",indeterminate:"",color:"primary"}}),t._v(" Проверка... ")],1):n("v-list-item-subtitle",{class:"d-flex "+(t.auths[i].login?"text--primary":"text--disabled")},[n("v-icon",{class:t.auths[i].login?"text--primary":"text--disabled",attrs:{left:"",small:""}},[t._v("mdi-account")]),n("span",{domProps:{textContent:t._s(t.auths[i].login||"(Нет)")}})],1)],1)],1),i!==t.$store.state.persist.serverHistory.length-1?n("v-divider",{key:"d"+i}):t._e()]}))],2)},P=[],Z=(n("d81d"),n("bc3a")),D=n.n(Z),R={data:function(){return{auths:[]}},beforeMount:function(){var t=this;this.auths=this.$store.state.persist.serverHistory.map((function(e,n){var i=e.server,r=e.token;return r&&t.updateInfo(i,r,n),{server:i,token:r,updating:!!r}}))},methods:{updateInfo:function(t,e,n){var i=this;return Object(F["a"])(regeneratorRuntime.mark((function r(){var s,o,a,l,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(i.auths),r.next=3,D.a.get(t,{params:{method:"auth.check",token:e},responseType:"json"});case 3:s=r.sent,o=s.data,a=o.error,l=o.response,c=l.status,u=l.login,(a||"valid"!==c)&&(i.auths[n].token=void 0),i.auths[n].login=u,i.auths[n].updating=!1;case 12:case"end":return r.stop()}}),r)})))()},clearHistory:function(){this.$store.commit("clearHistory")},selectServer:function(t,e){var n=this.auths[e],i=n.token,r=n.login,s=t.server;i?(this.$store.commit({type:"saveServer",address:s}),this.$store.commit({type:"auth",token:i}),this.$store.commit({type:"updateLogin",login:r}),this.api.openWS(),this.$router.push("/overview")):this.$emit("selected",s)}}},z=R,Y=n("ce7e"),M=n("8860"),X=n("da13"),G=n("5d23"),W=n("490a"),J=n("2fa4"),K=n("e0c7"),U=Object(d["a"])(z,N,P,!1,null,null,null),Q=U.exports;v()(U,{VBtn:f["a"],VDivider:Y["a"],VIcon:B["a"],VList:M["a"],VListItem:X["a"],VListItemContent:G["a"],VListItemSubtitle:G["b"],VListItemTitle:G["c"],VProgressCircular:W["a"],VSpacer:J["a"],VSubheader:K["a"]});var tt=n("7bb1"),et={en:/^[0-9A-Z_-]*$/i,cs:/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ_-]*$/i,da:/^[0-9A-ZÆØÅ_-]*$/i,de:/^[0-9A-ZÄÖÜß_-]*$/i,es:/^[0-9A-ZÁÉÍÑÓÚÜ_-]*$/i,fa:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰپژگچکی]*$/,fr:/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ_-]*$/i,it:/^[0-9A-Z\xC0-\xFF_-]*$/i,lt:/^[0-9A-ZĄČĘĖĮŠŲŪŽ_-]*$/i,nl:/^[0-9A-ZÉËÏÓÖÜ_-]*$/i,hu:/^[0-9A-ZÁÉÍÓÖŐÚÜŰ_-]*$/i,pl:/^[0-9A-ZĄĆĘŚŁŃÓŻŹ_-]*$/i,pt:/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ_-]*$/i,ru:/^[0-9А-ЯЁ_-]*$/i,sk:/^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ_-]*$/i,sr:/^[0-9A-ZČĆŽŠĐ_-]*$/i,sv:/^[0-9A-ZÅÄÖ_-]*$/i,tr:/^[0-9A-ZÇĞİıÖŞÜ_-]*$/i,uk:/^[0-9А-ЩЬЮЯЄІЇҐ_-]*$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ_-]*$/,az:/^[0-9A-ZÇƏĞİıÖŞÜ_-]*$/i},nt=function(t,e){var n=(void 0===e?{}:e).locale,i=void 0===n?"":n;return Array.isArray(t)?t.every((function(t){return nt(t,{locale:i})})):i?(et[i]||et.en).test(t):Object.keys(et).some((function(e){return et[e].test(t)}))},it=[{name:"locale"}],rt={validate:nt,params:it};
/**
  * vee-validate v3.3.0
  * (c) 2020 Abdelrahman Awad
  * @license MIT
  */function st(t){return null===t||void 0===t}function ot(t){return Array.isArray(t)&&0===t.length}var at=function(t,e){var n=(void 0===e?{allowFalse:!0}:e).allowFalse,i={valid:!1,required:!0};return st(t)||ot(t)?i:!1!==t||n?(i.valid=!!String(t).trim().length,i):i},lt=!0,ct=[{name:"allowFalse",default:!0}],ut={validate:at,params:ct,computesRequired:lt};function dt(t){return dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ht(t){var e,n="string"===typeof t||t instanceof String;if(!n)throw null===t?e="null":(e=dt(t),e="object"===e&&t.constructor&&t.constructor.hasOwnProperty("name")?t.constructor.name:"a ".concat(e)),new TypeError("Expected string but received ".concat(e,"."))}function vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var n in e)"undefined"===typeof t[n]&&(t[n]=e[n]);return t}var ft={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};function pt(t,e){ht(t),e=vt(e,ft),e.allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));for(var n=t.split("."),i=0;i<n.length;i++)if(n[i].length>63)return!1;if(e.require_tld){var r=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(r))return!1}for(var s,o=0;o<n.length;o++){if(s=n[o],e.allow_underscores&&(s=s.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(s))return!1;if(/[\uff01-\uff5e]/.test(s))return!1;if("-"===s[0]||"-"===s[s.length-1])return!1}return!0}var mt=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,gt=/^[0-9A-F]{1,4}$/i;function wt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(ht(t),e=String(e),!e)return wt(t,4)||wt(t,6);if("4"===e){if(!mt.test(t))return!1;var n=t.split(".").sort((function(t,e){return t-e}));return n[3]<=255}if("6"===e){var i=[t];if(t.includes("%")){if(i=t.split("%"),2!==i.length)return!1;if(!i[0].includes(":"))return!1;if(""===i[1])return!1}var r=i[0].split(":"),s=!1,o=wt(r[r.length-1],4),a=o?7:8;if(r.length>a)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(r.shift(),r.shift(),s=!0):"::"===t.substr(t.length-2)&&(r.pop(),r.pop(),s=!0);for(var l=0;l<r.length;++l)if(""===r[l]&&l>0&&l<r.length-1){if(s)return!1;s=!0}else if(o&&l===r.length-1);else if(!gt.test(r[l]))return!1;return s?r.length>=1:r.length===a}return!1}var yt={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},bt=/^\[([^\]]+)\](?::([0-9]+))?$/;function xt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function _t(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(t===i||xt(i)&&i.test(t))return!0}return!1}function $t(t,e){if(ht(t),!t||t.length>=2083||/[\s<>]/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;var n,i,r,s,o,a,l,c;if(e=vt(e,yt),l=t.split("#"),t=l.shift(),l=t.split("?"),t=l.shift(),l=t.split("://"),l.length>1){if(n=l.shift().toLowerCase(),e.require_valid_protocol&&-1===e.protocols.indexOf(n))return!1}else{if(e.require_protocol)return!1;if("//"===t.substr(0,2)){if(!e.allow_protocol_relative_urls)return!1;l[0]=t.substr(2)}}if(t=l.join("://"),""===t)return!1;if(l=t.split("/"),t=l.shift(),""===t&&!e.require_host)return!0;if(l=t.split("@"),l.length>1){if(e.disallow_auth)return!1;if(i=l.shift(),i.indexOf(":")>=0&&i.split(":").length>2)return!1}s=l.join("@"),a=null,c=null;var u=s.match(bt);return u?(r="",c=u[1],a=u[2]||null):(l=s.split(":"),r=l.shift(),l.length&&(a=l.join(":"))),!(null!==a&&(o=parseInt(a,10),!/^[0-9]+$/.test(a)||o<=0||o>65535))&&(!!(wt(r)||pt(r,e)||c&&wt(c,6))&&(r=r||c,!(e.host_whitelist&&!_t(r,e.host_whitelist))&&(!e.host_blacklist||!_t(r,e.host_blacklist))))}var Ct=n("d3a4");console.log(Ct["a"]),Object(tt["c"])("required",Object(g["a"])({},ut,{message:Ct["a"].getLocaleMessage("auth.errors.empty")})),Object(tt["c"])("url",(function(t){return $t(t,{protocols:["http","https"],require_protocol:!0,require_valid_protocol:!0,require_tld:!1})||Ct["a"].getLocaleMessage("auth.errors.invalid")}));var kt={components:{ValidationProvider:tt["b"],ValidationObserver:tt["a"],ServerHistory:Q},data:function(){return{server:"",checking:!1}},methods:{selected:function(t){this.server=t,this.checkServer()},checkServer:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.checking=!0,e.next=3,t.api.checkServer(t.server);case 3:if(n=e.sent,t.checking=!1,!0===n){e.next=7;break}return e.abrupt("return",t.$refs.form.setErrors({Server:[n]}));case 7:t.$emit("input",1);case 8:case"end":return e.stop()}}),e)})))()}}},St=kt,Ot=(n("b49a"),n("0e8f")),At=n("a722"),It=n("8654"),Tt=n("9d65"),jt=n("4e82"),Et=n("c3f0"),Bt=Object(A["a"])(Tt["a"],Object(jt["a"])("windowGroup","v-window-item","v-window")),Vt=Bt.extend().extend().extend({name:"v-window-item",directives:{Touch:Et["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data:function(){return{isActive:!1,inTransition:!1}},computed:{classes:function(){return this.groupClasses},computedTransition:function(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot:function(){return this.$slots.default},genWindowItem:function(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition:function(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition:function(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(T["f"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled:function(){this.onAfterTransition()},onEnter:function(t){var e=this;this.inTransition&&this.$nextTick((function(){e.computedTransition&&e.inTransition&&(e.windowGroup.transitionHeight=Object(T["f"])(t.clientHeight))}))}},render:function(t){var e=this;return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((function(){return[e.genWindowItem()]})))}}),Lt=Object(d["a"])(St,q,H,!1,null,"d6b1051e",null),qt=Lt.exports;v()(Lt,{VBtn:f["a"],VFlex:Ot["a"],VLayout:At["a"],VTextField:It["a"],VWindowItem:Vt});var Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-window-item",{key:1,staticClass:"container"},[n("div",{staticClass:"content"},[n("h6",{directives:[{name:"t",rawName:"v-t",value:"auth.authForm.title",expression:"'auth.authForm.title'"}],staticClass:"title"}),n("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.invalid;return[n("form",{staticClass:"py-3"},[n("ValidationProvider",{attrs:{name:"Login",rules:"required|alpha_dash"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors,r=e.validate;return[n("v-text-field",{staticClass:"mb-3",attrs:{"error-messages":i,required:"",label:t.$t("auth.authForm.login"),"hide-details":""},on:{input:r},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}})]}}],null,!0)}),n("ValidationProvider",{attrs:{name:"Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors,r=e.validate;return[n("v-text-field",{staticClass:"mb-3",attrs:{"error-messages":i,required:"",label:t.$t("auth.authForm.password"),type:"password"},on:{input:r},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})]}}],null,!0)}),n("div",{staticClass:"pt-3"},[n("v-btn",{directives:[{name:"t",rawName:"v-t",value:"auth.authForm.signin",expression:"'auth.authForm.signin'"}],staticClass:"mr-3",attrs:{color:"primary",disabled:i,loading:t.authorizing},on:{click:t.auth}}),n("v-btn",{directives:[{name:"t",rawName:"v-t",value:"auth.authForm.back",expression:"'auth.authForm.back'"}],attrs:{color:"primary",text:""},on:{click:function(e){return t.$emit("input",0)}}})],1)],1)]}}])})],1)])},Ft=[];Object(tt["c"])("required",Object(g["a"])({},ut,{message:"Это поле обязательно"})),Object(tt["c"])("alpha_dash",Object(g["a"])({},rt,{message:"Введите корректный логин (A-z, 0-9 и _)"}));var Nt={components:{ValidationProvider:tt["b"],ValidationObserver:tt["a"]},data:function(){return{login:"",password:"",authorizing:!1}},methods:{auth:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.authorizing=!0,n=t.login,i=t.password,e.next=4,t.api.execMethod("auth",{login:n,password:i});case 4:if(r=e.sent,s=r.error,o=r.response,t.authorizing=!1,!s){e.next=10;break}return e.abrupt("return",t.$refs.form.setErrors({Password:[s.message]}));case 10:return t.$store.commit({type:"auth",token:o}),t.$store.commit({type:"updateLogin",login:n}),t.api.openWS(),e.abrupt("return",t.$router.push("/overview"));case 14:case"end":return e.stop()}}),e)})))()}}},Pt=Nt,Zt=(n("e76d"),Object(d["a"])(Pt,Ht,Ft,!1,null,"6dd4b061",null)),Dt=Zt.exports;v()(Zt,{VBtn:f["a"],VTextField:It["a"],VWindowItem:Vt});var Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-window-item",{key:2,staticClass:"container"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:48}})],1)},zt=[],Yt={props:["value"],watch:{value:function(t){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function n(){var i,r,s,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(2===t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,e.api.execMethod("auth.check");case 5:if(i=n.sent,r=i.error,s=i.response,o=s.status,a=s.login,!r&&"valid"===o){n.next=12;break}return n.abrupt("return",e.$emit("input",0));case 12:e.$store.commit({type:"updateLogin",login:a}),e.api.openWS(),setTimeout((function(){return e.$router.push("/overview")}),500),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](2),e.$emit("input",0);case 20:case"end":return n.stop()}}),n,null,[[2,17]])})))()}}},Mt=Yt,Xt=(n("f19c"),Object(d["a"])(Mt,Rt,zt,!1,null,"3c79c214",null)),Gt=Xt.exports;v()(Xt,{VProgressCircular:W["a"],VWindowItem:Vt});var Wt={name:"Auth",components:{DarkModeSwitch:s["a"],LanguageSelector:L,ServerSelect:qt,AuthForm:Dt,TokenCheck:Gt},data:function(){return{window:0}},mounted:function(){var t=this.$store.state.persist.token;t&&(this.window=2)}},Jt=Wt,Kt=n("a75b"),Ut=(n("99af"),n("7db0"),n("c740"),n("13b3"),n("afdd")),Qt=n("9d26"),te=n("604c"),ee=te["a"].extend({name:"v-window",provide:function(){return{windowGroup:this}},directives:{Touch:Et["a"]},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:{type:Boolean,default:void 0},showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data:function(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive:function(){return this.transitionCount>0},classes:function(){return Object(g["a"])({},te["a"].options.computed.classes.call(this),{"v-window--show-arrows-on-hover":this.showArrowsOnHover})},computedTransition:function(){if(!this.isBooted)return"";var t=this.vertical?"y":"x",e=this.$vuetify.rtl&&"x"===t?!this.internalReverse:this.internalReverse,n=e?"-reverse":"";return"v-window-".concat(t).concat(n,"-transition")},hasActiveItems:function(){return Boolean(this.items.find((function(t){return!t.disabled})))},hasNext:function(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev:function(){return this.continuous||this.internalIndex>0},internalIndex:function(){var t=this;return this.items.findIndex((function(e,n){return t.internalValue===t.getValue(e,n)}))},internalReverse:function(){return this.reverse?!this.isReverse:this.isReverse}},watch:{internalIndex:"updateReverse"},mounted:function(){var t=this;window.requestAnimationFrame((function(){return t.isBooted=!0}))},methods:{genContainer:function(){var t=[this.$slots.default];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon:function(t,e,n){var i=this;return this.$createElement("div",{staticClass:"v-window__".concat(t)},[this.$createElement(Ut["a"],{props:{icon:!0},attrs:{"aria-label":this.$vuetify.lang.t("$vuetify.carousel.".concat(t))},on:{click:function(){i.changedByDelimiters=!0,n()}}},[this.$createElement(Qt["a"],{props:{large:!0}},e)])])},genControlIcons:function(){var t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){var n=this.genIcon("prev",e,this.prev);n&&t.push(n)}var i=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&i&&"string"===typeof i){var r=this.genIcon("next",i,this.next);r&&t.push(r)}return t},getNextIndex:function(t){var e=(t+1)%this.items.length,n=this.items[e];return n.disabled?this.getNextIndex(e):e},getPrevIndex:function(t){var e=(t+this.items.length-1)%this.items.length,n=this.items[e];return n.disabled?this.getPrevIndex(e):e},next:function(){if(this.isReverse=this.$vuetify.rtl,this.hasActiveItems&&this.hasNext){var t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)}},prev:function(){if(this.isReverse=!this.$vuetify.rtl,this.hasActiveItems&&this.hasPrev){var t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)}},updateReverse:function(t,e){this.changedByDelimiters?this.changedByDelimiters=!1:this.isReverse=t<e}},render:function(t){var e=this,n={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){var i=this.touch||{left:function(){e.$vuetify.rtl?e.prev():e.next()},right:function(){e.$vuetify.rtl?e.next():e.prev()},end:function(t){t.stopPropagation()},start:function(t){t.stopPropagation()}};n.directives.push({name:"touch",value:i})}return t("div",n,[this.genContainer()])}}),ne=Object(d["a"])(Jt,i,r,!1,null,null,null);e["default"]=ne.exports;v()(ne,{VContent:Kt["a"],VFlex:Ot["a"],VLayout:At["a"],VWindow:ee})},"368e":function(t,e,n){},"3c93":function(t,e,n){},"645b":function(t,e,n){},a722:function(t,e,n){"use strict";n("20f6");var i=n("e8f2");e["a"]=Object(i["a"])("layout")},afdd:function(t,e,n){"use strict";var i=n("8336");e["a"]=i["a"]},b49a:function(t,e,n){"use strict";var i=n("00b8"),r=n.n(i);r.a},c3f0:function(t,e,n){"use strict";n("4160"),n("159b");var i=n("80d2"),r=function(t){var e=t.touchstartX,n=t.touchendX,i=t.touchstartY,r=t.touchendY,s=.5,o=16;t.offsetX=n-e,t.offsetY=r-i,Math.abs(t.offsetY)<s*Math.abs(t.offsetX)&&(t.left&&n<e-o&&t.left(t),t.right&&n>e+o&&t.right(t)),Math.abs(t.offsetX)<s*Math.abs(t.offsetY)&&(t.up&&r<i-o&&t.up(t),t.down&&r>i+o&&t.down(t))};function s(t,e){var n=t.changedTouches[0];e.touchstartX=n.clientX,e.touchstartY=n.clientY,e.start&&e.start(Object.assign(t,e))}function o(t,e){var n=t.changedTouches[0];e.touchendX=n.clientX,e.touchendY=n.clientY,e.end&&e.end(Object.assign(t,e)),r(e)}function a(t,e){var n=t.changedTouches[0];e.touchmoveX=n.clientX,e.touchmoveY=n.clientY,e.move&&e.move(Object.assign(t,e))}function l(t){var e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:function(t){return s(t,e)},touchend:function(t){return o(t,e)},touchmove:function(t){return a(t,e)}}}function c(t,e,n){var r=e.value,s=r.parent?t.parentElement:t,o=r.options||{passive:!0};if(s){var a=l(e.value);s._touchHandlers=Object(s._touchHandlers),s._touchHandlers[n.context._uid]=a,Object(i["r"])(a).forEach((function(t){s.addEventListener(t,a[t],o)}))}}function u(t,e,n){var r=e.value.parent?t.parentElement:t;if(r&&r._touchHandlers){var s=r._touchHandlers[n.context._uid];Object(i["r"])(s).forEach((function(t){r.removeEventListener(t,s[t])})),delete r._touchHandlers[n.context._uid]}}var d={inserted:c,unbind:u};e["a"]=d},e707:function(t,e,n){"use strict";n("caad"),n("a9e3"),n("2532");var i=n("5530"),r=(n("3c93"),n("a9ad")),s=n("7560"),o=n("f2e7"),a=n("58df"),l=Object(a["a"])(r["a"],s["a"],o["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim:function(){var t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes:function(){return Object(i["a"])({"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive},this.themeClasses)},computedOpacity:function(){return Number(this.isActive?this.opacity:0)},styles:function(){return{zIndex:this.zIndex}}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render:function(t){var e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",class:this.classes,style:this.styles},e)}}),c=l,u=n("80d2"),d=n("2b0e");e["a"]=d["a"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data:function(){return{overlay:null}},watch:{hideOverlay:function(t){this.isActive&&(t?this.removeOverlay():this.genOverlay())}},beforeDestroy:function(){this.removeOverlay()},methods:{createOverlay:function(){var t=new c({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});t.$mount();var e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay:function(){var t=this;if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),requestAnimationFrame((function(){t.overlay&&(void 0!==t.activeZIndex?t.overlay.zIndex=String(t.activeZIndex-1):t.$el&&(t.overlay.zIndex=Object(u["o"])(t.$el)))})),this.overlay&&(this.overlay.value=!0),!0},removeOverlay:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.overlay&&(Object(u["a"])(this.overlay.$el,"transitionend",(function(){t.overlay&&t.overlay.$el&&t.overlay.$el.parentNode&&!t.overlay.value&&(t.overlay.$el.parentNode.removeChild(t.overlay.$el),t.overlay.$destroy(),t.overlay=null)})),this.overlay.value=!1),e&&this.showScroll()},scrollListener:function(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;var e=[u["q"].up,u["q"].pageup],n=[u["q"].down,u["q"].pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!n.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar:function(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t);return["auto","scroll"].includes(e.overflowY)&&t.scrollHeight>t.clientHeight},shouldScroll:function(t,e){return 0===t.scrollTop&&e<0||t.scrollTop+t.clientHeight===t.scrollHeight&&e>0},isInside:function(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath:function(t){var e=t.path||this.composedPath(t),n=t.deltaY;if("keydown"===t.type&&e[0]===document.body){var i=this.$refs.dialog,r=window.getSelection().anchorNode;return!(i&&this.hasScrollbar(i)&&this.isInside(r,i))||this.shouldScroll(i,n)}for(var s=0;s<e.length;s++){var o=e[s];if(o===document)return!0;if(o===document.documentElement)return!0;if(o===this.$refs.content)return!0;if(this.hasScrollbar(o))return this.shouldScroll(o,n)}return!0},composedPath:function(t){if(t.composedPath)return t.composedPath();var e=[],n=t.target;while(n){if(e.push(n),"HTML"===n.tagName)return e.push(document),e.push(window),e;n=n.parentElement}return e},hideScroll:function(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(u["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll:function(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}})},e76d:function(t,e,n){"use strict";var i=n("11df"),r=n.n(i);r.a},f19c:function(t,e,n){"use strict";var i=n("645b"),r=n.n(i);r.a}}]);
//# sourceMappingURL=auth.51633e8d.js.map