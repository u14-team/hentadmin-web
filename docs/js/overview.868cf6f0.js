(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["overview"],{2226:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticStyle:{"max-height":"100vh"}},[a("Notifications"),a("v-app-bar",{attrs:{color:"blue-grey",dark:"",dense:""}},[a("v-toolbar-title",[t._v("HentAdmin")]),a("v-spacer"),a("ToolbarMenu")],1),a("v-container",{staticClass:"content"},[a("h4",{staticClass:"display-1 font-weight-bold my-3"},[t._v("Мониторинг")]),a("div",{staticClass:"py-2"},[a("v-btn",{staticClass:"mr-3",attrs:{small:"",outlined:"",color:"primary"}},[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-plus")]),t._v(" Добавить бота ")],1),a("v-btn",{attrs:{icon:"",color:"primary",small:"",loading:t.refreshing},on:{click:t.refresh}},[a("v-icon",[t._v("mdi-refresh")])],1)],1),a("v-row",t._l(t.$store.state.botList,(function(t){return a("BotCard",{key:t.id,attrs:{value:t}})})),1)],1)],1)},r=[],i=(a("96cf"),a("1da1")),s=a("b157"),o=a("0d99"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"4",xl:"3"}},[a("v-card",{staticClass:"elevation-3 botCard"},[a("v-list-item",{attrs:{"two-line":""}},[a("v-badge",{staticClass:"progressBadge",attrs:{bottom:"","offset-x":"30","offset-y":"32",color:t.badgeType},scopedSlots:t._u([t.badgeType?{key:"badge",fn:function(){return["red"===t.badgeType?a("v-icon",{staticStyle:{"font-size":"12px"},attrs:{color:"white"}},[t._v("mdi-alert")]):a("v-progress-circular",{staticClass:"ma-0",attrs:{color:"white",indeterminate:"",size:"14",width:"2"}})]},proxy:!0}:null],null,!0)},[a("v-list-item-avatar",{staticClass:"ml-0"},[a("v-avatar",[a("v-img",{attrs:{src:t.value.info.photos&&t.value.info.photos[0]}})],1)],1)],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(t.value.info.name)}}),a("v-list-item-subtitle",[t._v(" Статус: "),a("span",{directives:[{name:"t",rawName:"v-t",value:"botStatuses."+t.value.status,expression:"`botStatuses.${value.status}`"}]}),t.value.info.unknown?a("div",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.infoUnknown",expression:"'overview.cards.infoUnknown'"}],staticClass:"font-weight-medium caption"}):t._e()]),t.value.hasErrors&&"failed"!==t.value.status?a("v-list-item-subtitle",{staticClass:"orange--text d-flex align-items"},[a("v-icon",{attrs:{left:"",small:"",color:"orange"}},[t._v("mdi-alert")]),a("b",[t._v("Есть ошибки")])],1):t._e()],1),a("v-list-item-action",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{disabled:t.blockCtl,color:"primary",icon:"",dark:""}},n),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",{attrs:{dense:""}},["enabled"===t.value.status?a("v-list-item",{on:{click:function(){return t.stateCtl("reload")}}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"orange"}},[t._v("mdi-refresh")])],1),a("v-list-item-title",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.restart",expression:"'overview.cards.restart'"}]})],1):t._e(),"enabled"===t.value.status?a("v-list-item",{on:{click:function(){return t.stateCtl("disable")}}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-power")])],1),a("v-list-item-title",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.disable",expression:"'overview.cards.disable'"}]})],1):t.allowStart?a("v-list-item",{on:{click:function(){return t.stateCtl("enable")}}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-play")])],1),a("v-list-item-title",{directives:[{name:"t",rawName:"v-t",value:"overview.cards.enable",expression:"'overview.cards.enable'"}]})],1):t._e(),a("v-divider"),a("v-list-item",{attrs:{target:"_blank",href:"https://vk.com/club"+t.value.info.groupId}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-vk")])],1),a("v-list-item-title",[t._v("Группа ВКонтакте")])],1)],1)],1)],1)],1),a("v-card-actions",{staticClass:"mt-0 pt-0",staticStyle:{"margin-top":"auto"}},[a("v-btn",{attrs:{text:"",color:"primary",to:"/dashboard/"+t.value.id}},[t._v("Управление")])],1)],1)],1)},c=[],u=(a("caad"),a("8a79"),{props:["value"],computed:{blockCtl:function(){return this.value.status.endsWith("ing")},allowStart:function(){return["failed","disabled"].includes(this.value.status)},badgeType:function(){switch(this.value.status){case"reloading":return"orange";case"disabling":return"red darken-1";case"enabling":return"green";case"failed":return"red";default:return null}}},methods:{stateCtl:function(t){var e=this.value.id;this.api.execMethod("bots.ctl",{id:e,command:t})}}}),d=u,v=(a("6d9a"),a("2877")),f=a("6544"),p=a.n(f),m=a("8212"),b=a("4ca6"),g=a("8336"),h=a("b0af"),w=a("99d9"),y=(a("4160"),a("13d5"),a("45fc"),a("4ec9"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("2ca0"),a("159b"),a("ddb0"),a("ade3")),C=a("5530"),S=(a("4b85"),a("2b0e")),_=a("d9f7"),j=a("80d2"),k=["sm","md","lg","xl"],V=function(){return k.reduce((function(t,e){return t[e]={type:[Boolean,String,Number],default:!1},t}),{})}(),x=function(){return k.reduce((function(t,e){return t["offset"+Object(j["v"])(e)]={type:[String,Number],default:null},t}),{})}(),O=function(){return k.reduce((function(t,e){return t["order"+Object(j["v"])(e)]={type:[String,Number],default:null},t}),{})}(),I={col:Object.keys(V),offset:Object.keys(x),order:Object.keys(O)};function B(t,e,a){var n=t;if(null!=a&&!1!==a){if(e){var r=e.replace(t,"");n+="-".concat(r)}return"col"!==t||""!==a&&!0!==a?(n+="-".concat(a),n.toLowerCase()):n.toLowerCase()}}var L=new Map,N=S["a"].extend({name:"v-col",functional:!0,props:Object(C["a"])({cols:{type:[Boolean,String,Number],default:!1}},V,{offset:{type:[String,Number],default:null}},x,{order:{type:[String,Number],default:null}},O,{alignSelf:{type:String,default:null,validator:function(t){return["auto","start","end","center","baseline","stretch"].includes(t)}},tag:{type:String,default:"div"}}),render:function(t,e){var a=e.props,n=e.data,r=e.children,i=(e.parent,"");for(var s in a)i+=String(a[s]);var o=L.get(i);return o||function(){var t,e;for(e in o=[],I)I[e].forEach((function(t){var n=a[t],r=B(e,t,n);r&&o.push(r)}));var n=o.some((function(t){return t.startsWith("col-")}));o.push((t={col:!n||!a.cols},Object(y["a"])(t,"col-".concat(a.cols),a.cols),Object(y["a"])(t,"offset-".concat(a.offset),a.offset),Object(y["a"])(t,"order-".concat(a.order),a.order),Object(y["a"])(t,"align-self-".concat(a.alignSelf),a.alignSelf),t)),L.set(i,o)}(),t(a.tag,Object(_["a"])(n,{class:o}),r)}}),T=a("ce7e"),M=a("132d"),$=a("adda"),A=a("8860"),E=a("da13"),R=a("1800"),z=a("8270"),D=a("5d23"),G=a("34c3"),J=a("e449"),P=a("490a"),U=Object(v["a"])(d,l,c,!1,null,null,null),W=U.exports;p()(U,{VAvatar:m["a"],VBadge:b["a"],VBtn:g["a"],VCard:h["a"],VCardActions:w["a"],VCol:N,VDivider:T["a"],VIcon:M["a"],VImg:$["a"],VList:A["a"],VListItem:E["a"],VListItemAction:R["a"],VListItemAvatar:z["a"],VListItemContent:D["a"],VListItemIcon:G["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VMenu:J["a"],VProgressCircular:P["a"]});var H={components:{Notifications:s["a"],ToolbarMenu:o["a"],BotCard:W},data:function(){return{refreshing:!1}},methods:{refresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.refreshing=!0,e.next=3,t.api.execMethod("bots");case 3:a=e.sent,n=a.response,t.$store.commit({type:"updateBotList",botList:n}),t.refreshing=!1;case 7:case"end":return e.stop()}}),e)})))()},updateStatus:function(t){var e=t.id,a=t.status;this.$store.commit({type:"updateBot",id:e,status:a})},updateInfo:function(t){var e=t.id,a=t.info;this.$store.commit({type:"updateBot",id:e,info:a})}},created:function(){this.api.ws.on("status_new",this.updateStatus),this.api.ws.on("info_new",this.updateInfo)},beforeDestroy:function(){this.api.ws.off("status_new",this.updateStatus),this.api.ws.on("info_new",this.updateInfo)},mounted:function(){this.refresh()}},q=H,F=(a("858c"),a("40dc")),K=a("a523"),Q=a("a75b"),X=(a("99af"),a("2532"),["sm","md","lg","xl"]),Y=["start","end","center"];function Z(t,e){return X.reduce((function(a,n){return a[t+Object(j["v"])(n)]=e(),a}),{})}var tt=function(t){return[].concat(Y,["baseline","stretch"]).includes(t)},et=Z("align",(function(){return{type:String,default:null,validator:tt}})),at=function(t){return[].concat(Y,["space-between","space-around"]).includes(t)},nt=Z("justify",(function(){return{type:String,default:null,validator:at}})),rt=function(t){return[].concat(Y,["space-between","space-around","stretch"]).includes(t)},it=Z("alignContent",(function(){return{type:String,default:null,validator:rt}})),st={align:Object.keys(et),justify:Object.keys(nt),alignContent:Object.keys(it)},ot={align:"align",justify:"justify",alignContent:"align-content"};function lt(t,e,a){var n=ot[t];if(null!=a){if(e){var r=e.replace(t,"");n+="-".concat(r)}return n+="-".concat(a),n.toLowerCase()}}var ct=new Map,ut=S["a"].extend({name:"v-row",functional:!0,props:Object(C["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:tt}},et,{justify:{type:String,default:null,validator:at}},nt,{alignContent:{type:String,default:null,validator:rt}},it),render:function(t,e){var a=e.props,n=e.data,r=e.children,i="";for(var s in a)i+=String(a[s]);var o=ct.get(i);return o||function(){var t,e;for(e in o=[],st)st[e].forEach((function(t){var n=a[t],r=lt(e,t,n);r&&o.push(r)}));o.push((t={"no-gutters":a.noGutters,"row--dense":a.dense},Object(y["a"])(t,"align-".concat(a.align),a.align),Object(y["a"])(t,"justify-".concat(a.justify),a.justify),Object(y["a"])(t,"align-content-".concat(a.alignContent),a.alignContent),t)),ct.set(i,o)}(),t(a.tag,Object(_["a"])(n,{staticClass:"row",class:o}),r)}}),dt=a("2fa4"),vt=a("2a7f"),ft=Object(v["a"])(q,n,r,!1,null,"017e47b2",null);e["default"]=ft.exports;p()(ft,{VAppBar:F["a"],VBtn:g["a"],VContainer:K["a"],VContent:Q["a"],VIcon:M["a"],VRow:ut,VSpacer:dt["a"],VToolbarTitle:vt["a"]})},"652f":function(t,e,a){},"6d9a":function(t,e,a){"use strict";var n=a("652f"),r=a.n(n);r.a},"858c":function(t,e,a){"use strict";var n=a("b233"),r=a.n(n);r.a},b233:function(t,e,a){}}]);
//# sourceMappingURL=overview.868cf6f0.js.map